# 🎭 男性視角自定義故事模板使用指南

## 📖 概述

系統現在支援兩種視角的自定義故事模板：
- 👩 **女性視角** (Girl Template) - 使用粉色/紫色背景
- 👨 **男性視角** (Boy Template) - 使用藍色/綠色背景

## 🎯 使用方法

### 方法一：使用專門的男性故事檔案

1. **創建男性故事檔案**：
   ```
   📍 檔案位置：ming/my_custom_story_boy.txt
   ```

2. **檔案格式**：
   ```
   # 第一行：標題
   網上識女仔，見面先知係照騙……
   
   # 中間：故事內容（可以多段）
   單身咗成年，朋友個個都有女朋友...
   
   # 最後一行：結尾問句
   奉勸各位兄弟真係要帶眼識人...
   ```

3. **運行生成**：
   - 系統會自動檢測到這是男性視角故事
   - 使用藍色/綠色背景模板
   - 生成適合男性讀者的圖片

### 方法二：智能自動檢測

系統會根據以下規則自動選擇模板：

#### 📁 檔案名稱檢測
- 包含 `boy`、`male`、`男` → 男性模板
- 包含 `girl`、`female`、`女` → 女性模板
- 例如：`my_custom_story_boy.txt` → 自動使用男性模板

#### 📝 內容關鍵詞檢測
**男性視角關鍵詞**：
- `兄弟`、`各位兄弟`、`大佬`
- `識女仔`、`女朋友`、`女神`
- `正到不得了`、`我哋男人`
- `男仔`、`做男人`、`兄弟們`

**女性視角關鍵詞**：
- `絲打`、`各位絲打`、`姐妹`
- `識男仔`、`男朋友`、`男神`
- `靚仔`、`我哋女人`
- `女仔`、`做女人`、`姐妹們`

## 🎨 模板差異

### 👩 女性模板 (Girl Template)
- **背景色調**：粉色、紫色、溫暖色調
- **背景圖片**：
  - `content_page1_girl.png`
  - `content_page2_girl.png`
  - `content_page3_girl.png`

### 👨 男性模板 (Boy Template)
- **背景色調**：藍色、綠色、冷色調
- **背景圖片**：
  - `content_page1_boy.png`
  - `content_page2_boy.png`
  - `content_page3_boy.png`

## 📋 檔案結構

```
ming/
├── my_custom_story.txt      # 女性視角故事（預設）
├── my_custom_story_boy.txt  # 男性視角故事（新增）
└── custom_story_reader.py   # 增強的讀取器
```

## 🔍 視角檢測流程

1. **檔案名稱優先**：
   - 如果檔案名包含明確的性別標識，直接使用
   - 例如：`*_boy.txt` → 男性模板

2. **內容分析**：
   - 如果檔案名稱沒有明確標識，分析故事內容
   - 計算男性/女性關鍵詞出現次數
   - 選擇得分較高的視角

3. **預設選擇**：
   - 如果無法確定，預設使用女性視角

## 📱 生成結果

### 視角檢測報告
```
🎭 視角檢測結果:
   📁 檔案名稱檢測: male
   📝 內容檢測: male
   ✅ 最終選擇: male (男性視角)
```

### 圖片命名
- 女性故事：`custom_20241215_123456_title.png`
- 男性故事：`custom_boy_20241215_123456_title.png`

## 💡 使用建議

### ✅ 推薦做法
1. **明確檔案命名**：使用 `*_boy.txt` 或 `*_girl.txt`
2. **內容風格一致**：使用對應性別的用詞習慣
3. **關鍵詞豐富**：適當使用性別特定的詞彙

### ❌ 避免問題
1. **混合風格**：不要在同一故事中混用男女性視角詞彙
2. **模糊命名**：避免使用無法識別性別的檔案名
3. **內容矛盾**：檔案名和內容風格要保持一致

## 🚀 快速開始

1. **複製現有檔案**：
   ```bash
   cp ming/my_custom_story.txt ming/my_custom_story_boy.txt
   ```

2. **編輯內容**：
   - 修改為男性視角的故事
   - 使用男性化的用詞和表達

3. **運行生成**：
   - 系統會自動檢測並使用男性模板
   - 生成適合的背景和色調

## 🔧 技術細節

### 檢測函數
- `detect_perspective_from_filename()` - 檔案名檢測
- `detect_perspective_from_content()` - 內容檢測
- `read_custom_story()` - 增強的故事讀取器

### 模板函數
- `generate_exact_custom_template()` - 支援 perspective 參數
- `generate_relationship_end_template()` - 支援不同視角結尾

## 📞 支援

如果遇到問題：
1. 檢查檔案格式是否正確
2. 確認關鍵詞是否充足
3. 查看視角檢測報告
4. 手動指定檔案名稱（使用 `*_boy.txt`）

---

**🎉 現在你可以為不同性別的讀者創建專屬的故事模板了！** 